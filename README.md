# ToDo Telegram Bot

–ë–æ—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ª–∏—á–Ω—ã–º–∏ –∑–∞–¥–∞—á–∞–º–∏ —á–µ—Ä–µ–∑ Telegram —Å –±—ç–∫–µ–Ω–¥–æ–º –Ω–∞ Django –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –∑–∞–¥–∞—á —á–µ—Ä–µ–∑ Celery.

---

## üìù –û–ø–∏—Å–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

1. **Telegram Bot** (Aiogram + Aiogram-Dialog)
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç:
     - –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å–≤–æ–∏ –∑–∞–¥–∞—á–∏ (`/tasks`)
     - –î–æ–±–∞–≤–ª—è—Ç—å –∑–∞–¥–∞—á–∏ (`/add`)
     - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–∞—á–∏ (`/edit <ID>`)
     - –£–¥–∞–ª—è—Ç—å –∑–∞–¥–∞—á–∏ (`/delete <ID>`)
     - –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –∑–∞–¥–∞—á–∏ –ø–æ —Ç–µ–≥–∞–º —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫–∏
   - –î–∏–∞–ª–æ–≥–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —á–µ—Ä–µ–∑ `aiogram-dialog`, —á—Ç–æ–±—ã —à–∞–≥ –∑–∞ —à–∞–≥–æ–º —Å–æ–±–∏—Ä–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –æ –∑–∞–¥–∞—á–µ (–Ω–∞–∑–≤–∞–Ω–∏–µ, –æ–ø–∏—Å–∞–Ω–∏–µ, —Ç–µ–≥–∏, –¥–∞—Ç–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è).

2. **Backend API** (Django + Django REST Framework)
   - –•—Ä–∞–Ω–∏—Ç –∑–∞–¥–∞—á–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
   - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –∑–∞–¥–∞—á.
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–≥–æ–≤ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏.
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–∞–¥–∞—á–∏ —Å —Ç–µ–≥–∞–º–∏ —á–µ—Ä–µ–∑ API.
   - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–∞—Å—Ç—É–ø–ª–µ–Ω–∏–∏ –¥–∞—Ç—ã –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è —á–µ—Ä–µ–∑ Celery + Redis.

---
## üîß –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```text
Telegram Bot (Aiogram)
    ‚îú‚îÄ main.py                 # –∫–æ–º–∞–Ω–¥—ã –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
    ‚îú‚îÄ dialogs.py              # –¥–∏–∞–ª–æ–≥–∏ (Aiogram-Dialog)
    ‚îî‚îÄ api_client.py           # –∫–ª–∏–µ–Ω—Ç –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å Django API

Backend (Django + DRF)
    ‚îú‚îÄ apps/tasks/             # –º–æ–¥–µ–ª–∏ Task, Tag, BotUser
    ‚îú‚îÄ apps/users/             # –∫–∞—Å—Ç–æ–º–Ω–∞—è –º–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    ‚îú‚îÄ api/serializers.py      # —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä—ã Task/Tag
    ‚îú‚îÄ api/views.py            # ViewSet –¥–ª—è CRUD –∑–∞–¥–∞—á
    ‚îî‚îÄ config/celery.py        # –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Celery

Asynchronous Tasks
    ‚îî‚îÄ Celery + Redis          # —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–∞—Å—Ç—É–ø–ª–µ–Ω–∏–∏ –¥–∞—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
```

---

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫
–í –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Makefile –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–±–æ—Ä–∫–æ–π –∏ –∑–∞–ø—É—Å–∫–æ–º.

##### 1. –°–æ–∑–¥–∞–π—Ç–µ .env –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
```bash
POSTGRES_DB=<your_database_name>
POSTGRES_USER=<your_database_user>
POSTGRES_PASSWORD=<your_database_password>
DJANGO_SECRET_KEY=<your_django_secret_key>
BOT_TOKEN=<your_telegram_bot_token>
API_URL=http://backend:8000/api/
```

##### 2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Docker –∏ Docker Compose —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã.
##### 3. –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞ —á–µ—Ä–µ–∑ Makefile
```bash
make up
```

##### 4. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
```bash
make down
```

## üì± –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ Telegram
![example](assets/screenshot_bot.png)